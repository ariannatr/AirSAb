<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml">
<!--
Template Name: Maxisonix
Author: <a href="http://www.os-templates.com/">OS Templates</a>
Author URI: http://www.os-templates.com/
Licence: Free to use under our free template licence terms
Licence URI: http://www.os-templates.com/template-terms
-->
<head >
    <title>My Reservations</title>
    <!-- Bootstrap core CSS -->
    <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" type="text/css" media="all">

    <!-- Custom styles for this template -->
    <link th:href="@{/css/one-page-wonder.css}" rel="stylesheet" type="text/css" media="all">
    <link th:href="@{/css/searchCss.css}" rel="stylesheet" type="text/css" media="all">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .animated {
        -webkit-transition: height 0.2s;
        -moz-transition: height 0.2s;
        transition: height 0.2s;
        }

        .stars
        {
        margin: 20px 0;
        font-size: 24px;
        color: #d17581;
        }
    </style>
</head>

<body id="top" style="background-color: whitesmoke">

<div th:replace="/fragments/navbar :: navbar('reservations')"></div>


<!-- main body -->

<div class="mainDiv">

<h2 align="center">Reservations</h2>

    <div class="sidebar one_quarter first">
        <div class="tab">
            <button type="button" class="tablinks  list-group-item" onclick="openCity(event, 'reservations')" th:id="${((param.tab != null)and (param.tab[0] == 'reservations')) ? 'my_active' : ''}">
                <i class="fa fa-calendar-check-o" style="width:30%" ></i> Reservations<span class="badge" th:text="${#lists.size(currRes)}"></span></button>
            <button type="button" class="tablinks  list-group-item" onclick="openCity(event, 'old_activities')" th:id="${((param.tab != null) and (param.tab[0] == 'old_activities')) ? 'my_active' : ''}">
                <i class="fa fa-calendar-minus-o" style="width:30%"></i> Older Reservations<span class="badge" th:text="${#lists.size(pastRes)}"></span> </button>

        </div>

    </div>

    <div class="content three_quarter">

    <div id="reservations"  class="tabcontent">

    <div class="group results">
    <!--article class="one_third first"-->
        <div th:if="${(#lists.size(currRes)==0)}">
            <p> You have not attended any reservation yet!</p>
        </div>
    <div th:if ="${(currRes!=null and #lists.size(currRes)!=0)}">
        <div th:each="curr, iterStat : ${currRes} ">
            <div >
                <div th:if="${(currAparts[iterStat.index].photo!= '')}">
                    <figure>
                    <img style=" width:200px; height:190px;float: left; margin: 0px 15px 15px 0px;" alt="Apartment Pic"  th:src ="${currAparts[iterStat.index].photo}" style="width:300px;height:150px"/>
                        <figcaption>
                            <time datetime="2045-04-06T08:15+00:00" th:text="${curr.startdate}"><strong></strong> <em></em></time>
                        </figcaption>
                    </figure>
                </div>
                <div th:if="${(currAparts[iterStat.index].photo== '')}">
                    <figure>
                    <img th:src="@{/images/no_image.png}"  style="width:300px;height:150px"/>
                        <figcaption>
                            <time datetime="2045-04-06T08:15+00:00" th:text="${curr.startdate}"><strong></strong> <em></em></time>
                        </figcaption>
                    </figure>
                </div>
                <article >
                    <div class="txtwrap">
                        <h4 class="heading"><span th:text="${currAparts[iterStat.index].name}"></span></h4>
                        <div class="rown">
                            <div class="col-lg-6">
                                <div th:if="${(curr.approval==0)}">
                                    <span class="alert alert-warning">Not approved!</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div th:if="${(curr.approval==1)}">
                                    <span class="alert alert-success">Approved!</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                            <ul class="nospace meta">
                                <li><i class="fa fa-user"></i> <a href="#"><span th:text="${currAparts[iterStat.index].country}"></span></a></li>
                                <li><i class="fa fa-tag"></i> <a href="#"><span th:text="${currAparts[iterStat.index].town}"></span></a></li>
                            </ul>
                            <table>
                                <tr>
                                    <td>Price:</td>
                                    <td><span th:text="${curr.totalCost}"></span></td>
                                </tr>
                                <tr>
                                    <td>From:</td>
                                    <td><span th:text="${curr.startdate}"></span></td>
                                </tr>
                                <tr>
                                    <td>To:</td>
                                    <td><span th:text="${curr.finaldate}"></span></td>
                                </tr>
                            </table>
                            </div>
                        </div>
                        <footer><a th:href="@{/apartment/{apartmentID}(apartmentID=${currAparts[iterStat.index].id})}">Read  more.. &raquo;</a></footer>
                    </div>
                </article>
                <div th:if="${(approveOption!='true') and (mine=='false')}">
                    <div class="row" style="margin-top:40px;">
                        <div class="col-lg-6">
                            <div class="well well-sm">
                                <div class="text-right">
                                    <a class="btn btn-success btn-green" href="#reviews-anchor" id="open-review-box">Leave a Review</a>
                                </div>

                                <div class="row" id="post-review-box" style="display:none;">
                                    <div class="col-md-12">
                                        <form  method="post" th:action="@{/comment/{apartmentID}(apartmentID=${currAparts[iterStat.index].id})}">
                                            <input required id="ratings-hidden" name="rating" type="hidden" value="0">
                                            <textarea required class="form-control animated" cols="50" id="new-review" type="text" name="comment" placeholder="Enter your review here..." rows="5"></textarea>

                                            <div class="text-right">
                                                <div class="stars starrr" data-rating="0"></div>
                                                <a class="btn btn-danger btn-sm" href="#" id="close-review-box" style="display:none; margin-right: 10px;">
                                                    <span class="glyphicon glyphicon-remove"></span>Cancel</a>
                                                <button class="btn btn-success btn-lg" type="submit">Save</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--<form  method="post" th:action="@{/comment/{apartmentID}(apartmentID=${currAparts[iterStat.index].id})}">-->
                        <!--<label>Leave your comment</label>-->
                        <!--<input name="comment" type="text"/>-->
                        <!--<label>Leave your rating</label>-->
                        <!--<input name="rating" type="number" max="5"/>-->
                        <!--<button type="submit">Comment</button>-->
                    <!--</form>-->
                </div>
                <div th:if="${(approveOption=='true' and curr.approval==0)}">
                    <form  method="post" th:action="@{/approveReserve/{reserveID}(reserveID=${curr.id})}">
                        <button type="submit">Approve</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </br>
    </div>
    </div>
    <div id="old_activities" class="tabcontent" >
        <!-- ################################################################################################ -->

        <h2 align="center">Older Reservations</h2>

        <div class="group results">
            <!--article class="one_third first"-->
            <div th:if="${(#lists.size(pastRes)==0)}">
                <p> You have not attended any reservation yet!</p>
            </div>
            <div th:if ="${(pastRes!=null and #lists.size(pastRes)!=0)}">
                <div th:each="past, iterStat1 : ${pastRes} ">
                    <div>
                        <div th:if="${(pastAparts[iterStat1.index].photo!= '')}">
                            <figure>
                                <img style=" width:200px; height:190px;float: left; margin: 0px 15px 15px 0px;" alt="Apartment Pic"  th:src ="${pastAparts[iterStat1.index].photo}" style="width:300px;height:150px"/>
                                <figcaption>
                                    <time datetime="2045-04-06T08:15+00:00" th:text="${past.startdate}"><strong></strong> <em></em></time>
                                </figcaption>
                            </figure>
                        </div>
                        <div th:if="${(pastAparts[iterStat1.index].photo== '')}">
                            <figure>
                                <img th:src="@{/images/no_image.png}"  style="width:300px;height:150px"/>
                                <figcaption>
                                    <time datetime="2045-04-06T08:15+00:00" th:text="${past.startdate}"><strong></strong> <em></em></time>
                                </figcaption>
                            </figure>
                        </div>
                        <article >
                            <div class="txtwrap">
                                <h4 class="heading"><span th:text="${pastAparts[iterStat1.index].name}"></span></h4>
                                <ul class="nospace meta">
                                    <li><i class="fa fa-tag"></i> <a href="#"><span th:text="${pastAparts[iterStat1.index].country}"></span></a></li>
                                </ul>
                            </div>
                            <footer><a th:href="@{/apartment/{apartmentID}(apartmentID=${pastAparts[iterStat1.index].id})}">Read  more.. &raquo;</a></footer>
                        </article>
                    </div>
                    <div th:if="${(mine=='false')}">
                        <div class="row" style="margin-top:40px;">
                            <div class="col-md-6">
                                <div class="well well-sm">
                                    <div class="text-right">
                                        <a class="btn btn-success btn-green" href="#reviews-anchor" id="open-review-box">Leave a Review</a>
                                    </div>

                                    <div class="row" id="post-review-box" style="display:none;">
                                        <div class="col-md-12">
                                            <form  method="post" th:action="@{/comment/{apartmentID}(apartmentID=${currAparts[iterStat.index].id})}">
                                                <input required id="ratings-hidden" name="rating" type="hidden" value="0">
                                                <textarea  required class="form-control animated" cols="50" id="new-review" type="text" name="comment" placeholder="Enter your review here..." rows="5"></textarea>

                                                <div class="text-right">
                                                    <div class="stars starrr" data-rating="0"></div>
                                                    <a class="btn btn-danger btn-sm" href="#" id="close-review-box" style="display:none; margin-right: 10px;">
                                                        <span class="glyphicon glyphicon-remove"></span>Cancel</a>
                                                    <button class="btn btn-success btn-lg" type="submit">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                            </div>
                    </div>
                </div>
            </div>
            </br>

        </div>
        <div class="scrollable">

        </div>

        </br></br>


        <!-- ################################################################################################ -->
    </div>
    </div>
</div>
</div>

<div th:replace="/fragments/footer :: footer"></div>

</body>
<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/vendor/popper/popper.min.js}"></script>
<script th:src="@{/vendor/bootstrap/js/bootstrap.min.js}"></script>


<!-- Include jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" rel="stylesheet" type="text/css" media="all" />

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:300,400,700">
<script th:src="@{/scripts/reserves.js}"> </script>
<script type="text/javascript">
    document.getElementById("my_active").click();
</script>
</html>